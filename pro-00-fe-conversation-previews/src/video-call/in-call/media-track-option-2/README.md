This code covers many cases and copied from https://github.com/twilio/twilio-video-app-react
However, it's quite complicated, so may not be easy to understand.

A much simpler implementation is in `media-track-option-1`